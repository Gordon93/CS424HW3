<!DOCTYPE html>


<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Application</title>

<!-- Josh local test calls for local editing, do not remove unless you are Joshua --
        <link rel="stylesheet" type="text/css" href="/bootstrap-3.3.4-dist/css/bootstrap.min.css">
        <script type="text/javascript" src="D3/d3.js"></script>
        <script type="text/javascript" src="jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="leaflet.css" />
        <script type="text/javascript" src="leaflet.js"></script>

<!-- End Josh local test section. -->


		<!-- Core bootstrap CSS -->
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

        <!-- d3 library -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script> 

        <!-- Ajax -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

        <!--Angular-->
        <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.2.js"></script>

        <!-- leaflet -->
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
        <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>

        <!-- jQuery -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css">

        <!-- Leaflet playback -->
        <script src="LeafletPlayback.js"></script>

        -->
		<!-- Custom styles for this template -->
		<link href="styles.css" rel="stylesheet">

        <script src="barChart.js"></script>

        <script src="bootstrap.js"></script>

        <script src="lib/common.js"></script>
        <script src="lib/echonest/echonest.js"></script>
        <script src="lib/artistforcegraph.js"></script>


    </head>
	
	<body>
	        <!-- This section begins the bootstrap button headers -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container" style="margin-left:inherit">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">Project 2</a>

                </div>
                <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="app.html">Application</a></li>
                        <li><a href="facts.html">Facts</a></li>
                        <li><a href="setup.html">Setup</a></li>
                        <li><a href="data.html">Data</a></li>
                        <li><a href="work.html">Work</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="pageContent">
            <!-- PUT ALL PAGE CODE EITHER IN OR BELOW THIS DIV! OTHERWISE IT WILL FALL BELOW THE NAV BAR! -->

            <script>

                $(document).ready(function(){

                    $('ul.tabs li').click(function(){
                        var tab_id = $(this).attr('data-tab');

                        $('ul.tabs li').removeClass('current');
                        $('.tab-content').removeClass('current');

                        $(this).addClass('current');
                        $("#"+tab_id).addClass('current');
                    })

                })
            </script>


            <div id="user1panel" class="inline" style="height:95vh; width:17vw;font-size:1vw;">
                <div id="user1info" style="height:40%;">
                    <fieldset id="user1_artistlist" style="width:50%;overflow:auto;">
                        <legend style="font-size:12px;font-size:1vw; overflow:auto">Artists</legend>
                        <div id="user1_artistdisplay" style="width:100%;height:100%;"></div>
                    </fieldset>
                    <fieldset id="user1_genrelist" style="width:50%;overflow:auto;">
                        <legend style="font-size:12px;font-size:1vw; overflow:auto">Genres</legend>
                        <div id="user1_genresgenre" style="width:100%;height:100%;"></div>
                    </fieldset>
                </div>
                <div id="user1interface" style="height:50%">
                    <ul class="tabs">
                        <li class="tab-link current" data-tab="user1_highlight">Selection</li>
                        <li class="tab-link" data-tab="user1_artists">Artists</li>
                        <li class="tab-link" data-tab="user1_genres">Genres</li>
                    </ul>

                    <div id="user1_highlight" style="height:90%;" class="tab-content current">
                        <input type="checkbox" name="user1_selection_checkbox_artist" value="artist">Artist:
                            <input type="text" id="user1_selection_textbox_artist"> <br/>
                        <input type="checkbox" name="user1_selection_checkbox_genre" value="artist">Genre:
                            <select id="user1_selection_genrelist">
                            </select><br/>
                        <input type="checkbox" name="user1_selection_checkbox_decade" value="artist">Decade:
                            <select id="user1_selection_decadelist">
                            </select><br/>
                        <button id="user1_selection_button" style="width:8vw;height:4vh;font-size:.6vw">Highlight Selection</button>
                    </div>
                    <div id="user1_artists" style="height:90%;" class="tab-content">
                        <div class="inline" style="height:100%;width:30%;">
                            <select multiple id="user1_artist_artistlist" style="height:90%;">
                            </select> <br/>
                            <button id="user1_artist_button_removeartist" style="width:6vw;height:4vh;">Remove</button>
                        </div>
                        <div style="height:100%;width:40%" class="inline">
                            Name: <input type="text" style="width:60%" id="user1_artist_textbox_artistsearch"><br/>
                            Genre: <select id="user1_artist_selection_genre"></select> <br/>
                            Decade:<select id="user1_artist_selection_decade"></select> <br/>
                            <button id="user1_artist_button_searchartist" style="widht:6vw;height:4vh;">Search</button> <br/>
                            <select multiple id="user1_artist_searchresults" style="height:40%;">
                            </select> <br/>
                            <button id="user1_artist_button_addartist" style="width:5vw;height:4vh;">Add</button> <br/>
                        </div>
                        <div class="inline" style="height:100%; width:30%;">
                            Related Artists <br/>
                            <select multiple id="user1_artist_relatedartists" style="height:80%;">
                            </select> <br/>
                        </div>
                    </div>

                    <div id="user1_genres" style="height:90%;" class="tab-content">
                        <div class="inline" style="height:100%;width:40%;">
                            <select multiple id="user1_genre_selection_genrelist" style="height:90%;">
                            </select> <br/>
                            <button id="user1_genre_button_removegenre" style="width:6vw;height:4vh;">Remove</button>
                        </div>
                        <div style="height:100%;width:60%" class="inline">
                            Name: <input type="textbox" style="width:60%" id="user1_genre_artistsearch"><br/>
                            Decade:<select id="user1_genre_selection_decade"></select> <br/>
                            Sort by: <select id="user1_genre_selection_sort"></select> <br/>
                            <button id="user1_genre_button_searchgenre" style="width:6vw;height:4vh;">Search</button> <br/>
                            <select multiple id="user1_genre_selection_genre" style="height:50%;">
                            </select> <br/>
                            <button id="user1_genre_button_addgenre" style="width:5vw;height:4vh;">Add</button> <br/>
                        </div>
                    </div>
                </div>
            </div>

        <div id="shared" class="inline" style="height:95vh; width:64vw;">
            <div id="timeline" style="width:100%;height:30%;">
                <div id="chartContainer" style="width:100%;height:100%;">
                    <div id="bar"></div>
                </div>
            </div>
            <div id="map" class="inline" style="width:50%;height:70%">
            </div>
            <div id="fdg" class="inline" style="width:50%;height:70%">
            </div>

            <!--map js code-->
            <script type="text/javascript">

                var map = L.map('map').setView([41.83, -100], 3);

                // creating a map

                L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                    attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>',
                    maxZoom: 18,
                    noWrap: true,
                    id: 'ygordon22.cifd9ql4c53tbsmlx7cegx4iy',
                    accessToken: 'pk.eyJ1IjoieWdvcmRvbjIyIiwiYSI6ImNpZmQ5cW1idzUzeWFzNG03bjVqc3czZWEifQ.dpecRLb3F4lRAOvIVd5KpQ'
                }).addTo(map);

                var cities =[]
                var countries = []
                var decade = []
                var genre = []
                var names = []
                var marker = new Array();

                function getJson(){
                    $.getJSON( "data/top100.json", function( data ) {

                        //alert(JSON.stringify(data))
                        // now you can read the

                        for (var i=0; i<data.length; i++){
                            for (var j=0; j< data[i]["artists"].length;j++){

                                if(data[i]["artists"][j]["artist_location"] !=null){
                                    var mycity = data[i]["artists"][j]["artist_location"]["city"]
                                }
                                else{
                                    mycity = null;
                                }
                                cities.push(mycity)

                                if(data[i]["artists"][j]["artist_location"] !=null){

                                    if(data[i]["artists"][j]["artist_location"]["region"] !=null){
                                        mycountry = data[i]["artists"][j]["artist_location"]["region"]
                                    }
                                    else{
                                        var mycountry = data[i]["artists"][j]["artist_location"]["country"]
                                    }
                                }
                                else{
                                    mycountry = null;
                                }
                                countries.push(mycountry)


                                var myname = data[i]["artists"][j]["name"]
                                names.push(myname)

                                if(data[i]["artists"][j]["years_active"] !=null){
                                    var  myyear = data[i]["artists"][j]["years_active"][0]["start"]
                                }
                                else{
                                    var myyear = null;
                                }

                                decade.push(myyear)

                                if(data[i]["artists"][j]["genres"] != null){
                                    if(data[i]["artists"][j]["genres"][0] != null){
                                        var mygenre = data[i]["artists"][j]["genres"][0]["name"]
                                    }
                                }
                                else{
                                    var mygenre=null;
                                }
                                genre.push(mygenre)
                            }
                        }

                        names = names.slice(0,103)
                        cities = cities.slice(0,103)
                        decade = decade.slice(0,103)
                        countries = countries.slice(0,103)
                        genre = genre.slice(0,103)

                        GetResults();
                    });
                }


                function draw(location,i){

                    var lat = location["results"][0]["geometry"]["location"]["lat"];
                    var lng = location["results"][0]["geometry"]["location"]["lng"];
                    //alert([lat,lng])
                    //alert(names[i])
                    var marker = L.marker([lat,lng]).addTo(map);

                    var mylocation = "https://en.wikipedia.org/wiki/"+cities[i]
                    var myartist = "https://en.wikipedia.org/wiki/"+names[i]
                    //marker.bindPopup("<a href= '" + mylocation + "' >City</a>");
                    marker.bindPopup(names[i] + " belonged to " +genre[i]+ " is from " +cities[i]+" and started playing in "+decade[i] );
                    function onMapClick(e) {
                        e.openPopup();
                    }

                    map.on('click', onMapClick);
                }

                function GetResults() {
                    $.getJSON("locations.json", function( data ) {
                        //alert(JSON.stringify(data))
                        // alert(data.length)
                        for (var i=0; i<data.length; i++){
                            //alert(JSON.stringify(data[i]))
                            draw(data[i],i);
                        }
                    });
                    console.log(JSON.stringify(cities))
                    console.log(cities.length)
                    console.log(JSON.stringify(countries))
                    console.log(countries.length)
                    console.log(JSON.stringify(names))
                    console.log(names.length)
                    console.log(JSON.stringify(decade))
                    console.log(decade.length)
                }


                getJson();


                function addNode(){
                    // adding a new artist
                }

                function removeNode(){
                    // removing a marker
                }
            </script>

            <!-- FDG-->
            <script>
                $(function() {
                    fdg.init("#fdg");
                });
            </script>


        </div>
        </div>
	</body>
</html>